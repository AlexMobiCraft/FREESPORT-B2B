# –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (Data Models)

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã FREESPORT, –≤–∫–ª—é—á–∞—è –∫–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è, —Å–≤—è–∑–∏ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –º–æ–¥–µ–ª–µ–π.

## üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –†–æ–ª–∏ (`apps.users`)

### User
–û—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `AbstractUser`).
- **email**: Unique ID (–≤–º–µ—Å—Ç–æ username).
- **role**: –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`retail`, `wholesale_level1-3`, `trainer`, `federation_rep`, `admin`).
- **verification_status**: –°—Ç–∞—Ç—É—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ B2B (`unverified`, `verified`, `pending`).
- **onec_id**: –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—É –≤ 1–°.

### Company
–†–µ–∫–≤–∏–∑–∏—Ç—ã —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–≥–æ –ª–∏—Ü–∞ (–¥–ª—è B2B).
- –°–≤—è–∑—å 1:1 —Å `User`.
- –ü–æ–ª—è: –ò–ù–ù, –ö–ü–ü, –û–ì–†–ù, –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã.

### Address
–ê–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏.
- –°–≤—è–∑—å M:1 —Å `User`.
- –ü–æ–ª–µ `is_default` —Å –ª–æ–≥–∏–∫–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–±—Ä–æ—Å–∞ —Å—Ç–∞—Ä–æ–≥–æ –∞–¥—Ä–µ—Å–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

---

## üì¶ –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ (`apps.products`)

### Product
–ë–∞–∑–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞.
- **base_images**: JSON-—Å–ø–∏—Å–æ–∫ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ 1–° (fallback).
- **specifications**: JSONB-–ø–æ–ª–µ –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫.
- **–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ —Ñ–ª–∞–≥–∏**: `is_hit`, `is_new`, `is_sale`, `is_promo`, `is_premium`.

### ProductVariant (SKU)
–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Ç–æ–≤–∞—Ä–∞. –≠—Ç–æ –µ–¥–∏–Ω–∏—Ü–∞ —É—á–µ—Ç–∞ –≤ –∫–æ—Ä–∑–∏–Ω–µ –∏ –∑–∞–∫–∞–∑–∞—Ö.
- **sku**: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∞—Ä—Ç–∏–∫—É–ª.
- **–¶–µ–Ω—ã (6 —Ç–∏–ø–æ–≤)**: `retail_price`, `opt1-3_price`, `trainer_price`, `federation_price`.
- **–û—Å—Ç–∞—Ç–∫–∏**: `stock_quantity`, `reserved_quantity`.
- **–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏**: `color_name`, `size_value`.

### Category & Brand
- **Category**: –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Self-referencing FK).
- **Brand**: –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ `normalized_name` –∏ –º–∞–ø–ø–∏–Ω–≥ `Brand1CMapping`.

---

## üõí –ö–æ—Ä–∑–∏–Ω–∞ –∏ –ó–∞–∫–∞–∑—ã (`apps.cart`, `apps.orders`)

### Cart & CartItem
- **Cart**: –ü—Ä–∏–≤—è–∑–∫–∞ –∫ `User` –∏–ª–∏ `session_key` (–¥–ª—è –≥–æ—Å—Ç–µ–π).
- **CartItem**: –•—Ä–∞–Ω–∏—Ç `price_snapshot` ‚Äî —Ü–µ–Ω—É –≤ –º–æ–º–µ–Ω—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞.

### Order
–ó–∞–∫–∞–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **order_number**: UUID-—Å—Ç—Ä–æ–∫–∞.
- **total_amount**: –°—É–º–º–∞ (—Ç–æ–≤–∞—Ä—ã + –¥–æ—Å—Ç–∞–≤–∫–∞ - —Å–∫–∏–¥–∫–∏).
- **–°—Ç–∞—Ç—É—Å—ã**: `pending`, `confirmed`, `processing`, `shipped`, `delivered`, `cancelled`.
- **–ü–ª–∞—Ç–µ–∂–∏**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ÆKassa —á–µ—Ä–µ–∑ `payment_id`.

### OrderItem
–°–Ω–∏–º–æ–∫ (Snapshot) –∫—É–ø–ª–µ–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞.
- –ö–æ–ø–∏—Ä—É–µ—Ç `product_name`, `product_sku` –∏ `unit_price` –∏–∑ `ProductVariant` –≤ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –Ω–µ–∏–∑–º–µ–Ω–Ω–æ—Å—Ç—å –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–∫–∞–∑–æ–≤.

---

## ‚öôÔ∏è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (`apps.integrations`)

### ImportSession
–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–º–µ–Ω–∞ —Å 1–°.
- –•—Ä–∞–Ω–∏—Ç —Ç–∏–ø –∏–º–ø–æ—Ä—Ç–∞, —Å—Ç–∞—Ç—É—Å, `celery_task_id` –∏ –¥–µ—Ç–∞–ª—å–Ω—ã–π JSON-–æ—Ç—á–µ—Ç –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏.