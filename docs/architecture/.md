# История изменений

## 2025-08-10 - Улучшения модели Order и SyncLog

- **Добавлены вычисляемые свойства Order**:
  - `total_items` - общее количество товаров в заказе
  - `calculated_total` - рассчитанная сумма заказа 
  - `can_be_cancelled` - статус возможности отмены заказа
- **Добавлено ограничение unique_together в OrderItem**: `('order', 'product')` для предотвращения дубликатов товаров
- **Обновлены API схемы**: Добавлены readonly поля для новых вычисляемых свойств
- **Бизнес-логика**: Товар может присутствовать в заказе только в одной позиции, при повторном добавлении увеличивается количество
- **Обновлены типы синхронизации SyncLog**: Добавлен тип 'prices' для синхронизации цен с 1С
- **Новые SYNC_TYPES**: ['products', 'stocks', 'orders', 'prices'] вместо ['products', 'orders', 'stocks']

---

*Этот документ объединяет всю архитектурную документацию FREESPORT платформы в едином месте для упрощения навигации и сопровождения.*