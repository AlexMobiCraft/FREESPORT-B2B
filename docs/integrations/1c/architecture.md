# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å 1–° –¥–ª—è FREESPORT Platform

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–û–±–∑–æ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](#1-–æ–±–∑–æ—Ä-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã](#2-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ-–ø—Ä–∏–Ω—Ü–∏–ø—ã)
3. [–§–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã](#3-—Ñ–æ—Ä–º–∞—Ç—ã-–¥–∞–Ω–Ω—ã—Ö-–∏-–ø—Ä–æ—Ç–æ–∫–æ–ª—ã)
4. [–°—Ö–µ–º—ã –º–∞–ø–ø–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã—Ö](#4-—Å—Ö–µ–º—ã-–º–∞–ø–ø–∏–Ω–≥–∞-–¥–∞–Ω–Ω—ã—Ö)
5. [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](#5-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-—Å–∏—Å—Ç–µ–º—ã-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
6. [–ü—Ä–æ—Ü–µ—Å—Å—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏](#6-–ø—Ä–æ—Ü–µ—Å—Å—ã-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏)
7. [–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π](#7-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è-–ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π)
8. [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥](#8-–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫-–∏-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
9. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å](#9-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å-–∏-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
10. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#10-—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ-–∑–∞–¥–∞–Ω–∏–µ-–¥–ª—è-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
11. [–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ê: –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö CommerceML](#–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ-–∞-–∞–Ω–∞–ª–∏–∑-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã-–¥–∞–Ω–Ω—ã—Ö-commerceml)

---

## 1. –û–±–∑–æ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 1.1 –ë–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

**FREESPORT Platform** –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å **1–°:–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤–ª–µ–π** –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è:

- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤:** –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞, —Ü–µ–Ω, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–∞–º–∏:** –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞–ª–∏—á–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤  
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π:** –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –±–∞–∑—ã
- **–û–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–æ–≤:** –≠–∫—Å–ø–æ—Ä—Ç –∑–∞–∫–∞–∑–æ–≤ –∏–∑ –≤–µ–±-–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –≤ 1–°
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å—Ç–∞—Ç—É—Å–æ–≤:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–∫–∞–∑–æ–≤ –∏–∑ 1–°

### 1.2 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Å—Ö–µ–º–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

```mermaid
graph TD
    subgraph "1–°: –í—ã–≥—Ä—É–∑–∫–∞ CommerceML"
        A[groups.xml]
        B[goods.xml]
        C[offers.xml]
        D[prices.xml]
        E[rests.xml]
        F[propertiesGoods.xml]
    end

    subgraph "FREESPORT: –ü—Ä–æ—Ü–µ—Å—Å –∏–º–ø–æ—Ä—Ç–∞"
        K[Import Orchestrator]

        K -- 1. –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ --> G[–ü–∞—Ä—Å–µ—Ä groups.xml]
        G --> H[–°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: Category]
        
        K -- 2. –ë–∞–∑–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã --> I[–ü–∞—Ä—Å–µ—Ä goods.xml]
        I --> J[–°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: Product (—á–∞—Å—Ç–∏—á–Ω–æ–µ)]
        
        K -- 3. SKU, –¶–µ–Ω—ã, –û—Å—Ç–∞—Ç–∫–∏ --> L[–ü–∞—Ä—Å–µ—Ä offers.xml, prices.xml, rests.xml]
        L --> M[–ü–æ–∏—Å–∫ Product –ø–æ parent_onec_id]
        M --> N[–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: Product (—Ü–µ–Ω—ã, –æ—Å—Ç–∞—Ç–∫–∏, sku)]
    end

    subgraph "FREESPORT: –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö"
        H
        J
        N
    end
```

### 1.3 –¢—Ä–µ—Ö—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

**–ò–º–ø–æ—Ä—Ç –≤ FREESPORT (1–° ‚Üí Platform):**

- –¢–æ–≤–∞—Ä—ã –∏ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞
- –û—Å—Ç–∞—Ç–∫–∏ –∏ —Ü–µ–Ω—ã
- –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- –°—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤

**–≠–∫—Å–ø–æ—Ä—Ç –∏–∑ FREESPORT (Platform ‚Üí 1–°):**

- –ó–∞–∫–∞–∑—ã –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ù–æ–≤—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

**–î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤:**

- –ó–∞–≥—Ä—É–∑–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏–∑ 1–°
- –ü–µ—Ä–µ–¥–∞—á–∞ –Ω–æ–≤—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π —Å —Å–∞–π—Ç–∞ –≤ 1–°
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

---

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### 2.1 –ü—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

  1. **Idempotency:** –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –¥–æ–ª–∂–Ω–∞ –Ω–∞—Ä—É—à–∞—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å
  2. **Fault Tolerance:** –°–∏—Å—Ç–µ–º–∞ —É—Å—Ç–æ–π—á–∏–≤–∞ –∫ –≤—Ä–µ–º–µ–Ω–Ω—ã–º —Å–±–æ—è–º –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
  3. **Data Consistency:** –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞–¥ —Å–∫–æ—Ä–æ—Å—Ç—å—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
  4. **Incremental Sync:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
  5. **Audit Trail:** –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏–º–ø–æ—Ä—Ç–∞/—ç–∫—Å–ø–æ—Ä—Ç–∞
  6. **Customer Identity Resolution:** –ù–∞–¥–µ–∂–Ω–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –º–µ–∂–¥—É —Å–∏—Å—Ç–µ–º–∞–º–∏

### 2.2 –£—Ç–æ—á–Ω–µ–Ω–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è (–æ—Ç 19.09.2025)

–ù–∞ –æ—Å–Ω–æ–≤–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ —Ä–µ–≤—å—é –±—ã–ª–∏ –ø—Ä–∏–Ω—è—Ç—ã —Å–ª–µ–¥—É—é—â–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:

  1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ "–°–µ—Å—Å–∏–π –∏–º–ø–æ—Ä—Ç–∞"**:

   **–ó–∞–¥–∞—á–∞:**
  
   –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –º–∞—Å—Å–æ–≤–æ–º –∏–º–ø–æ—Ä—Ç–µ –∏–∑ XML-—Ñ–∞–π–ª–æ–≤.

  **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** –ö–∞–∂–¥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –∏–º–ø–æ—Ä—Ç–∞ –±—É–¥–µ—Ç –æ–±–µ—Ä–Ω—É—Ç–∞ –≤ "—Å–µ—Å—Å–∏—é" (–º–æ–¥–µ–ª—å `ImportSession`). –í—Å–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –≤ —Ö–æ–¥–µ –∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏. –í —Å–ª—É—á–∞–µ —Å–±–æ—è —ç—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∏–∑–±–µ–≥–∞—è –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –±–∞–∑–µ.

  1. **–ê–±—Å—Ç—Ä–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ —Å–ª–æ—è**:

     **–ó–∞–¥–∞—á–∞:** –û–±–µ—Å–ø–µ—á–∏—Ç—å –≥–∏–±–∫–æ—Å—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –¥–ª—è –±—É–¥—É—â–µ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ —Å —Ñ–∞–π–ª–æ–≤–æ–≥–æ –æ–±–º–µ–Ω–∞ –Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ API.
     **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** –õ–æ–≥–∏–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –±—É–¥–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –¥–≤–∞ —É—Ä–æ–≤–Ω—è:
      - **–°–ª–æ–π –ü–∞—Ä—Å–∏–Ω–≥–∞ (Parser):** –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —á—Ç–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (XML-—Ñ–∞–π–ª–∞) –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –µ–¥–∏–Ω—ã–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, Python `dict`).
      - **–°–ª–æ–π –û–±—Ä–∞–±–æ—Ç–∫–∏ (Processor):** –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —ç—Ç–æ–º –µ–¥–∏–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∏—Ö –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –º–æ–¥–µ–ª—è—Ö Django.
    - –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª–∏—Ç –≤ –±—É–¥—É—â–µ–º –∑–∞–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ `–ü–∞—Ä—Å–µ—Ä` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API, –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—è –æ—Å–Ω–æ–≤–Ω—É—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –≤ `–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä–µ`.

### 2.3 –í—ã–±–æ—Ä —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

**–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö:** **CommerceML 3.1** (XML)
**–ü—Ä–æ—Ç–æ–∫–æ–ª –ø–µ—Ä–µ–¥–∞—á–∏:** **HTTP Exchange** (–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±–º–µ–Ω–∞ —Å —Å–∞–π—Ç–æ–º 1–°-–ë–∏—Ç—Ä–∏–∫—Å)
**–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**
- **Transport Layer:** Django View (`ICExchangeView`) + Streaming Upload (`FileStreamService`)
- **Import Layer:** Celery Tasks (`import_products`, `import_orders`)
**–•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è:**
- **Sessions:** Django Session (—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±–º–µ–Ω–∞)
- **Data:** PostgreSQL + JSONB (—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** Structured logging + Django Admin interface

---

## 3. –§–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã

–ù–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ (—Å–º. [–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ê](#–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ-–∞-–∞–Ω–∞–ª–∏–∑-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã-–¥–∞–Ω–Ω—ã—Ö-commerceml)) –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö.

### 3.1 –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö: CommerceML 3.1

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–µ **CommerceML 3.1**, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–µ–º —Å–æ–±–æ–π –Ω–∞–±–æ—Ä XML-—Ñ–∞–π–ª–æ–≤ —Å —á–µ—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π.

### 3.2 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ã–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö

–î–∞–Ω–Ω—ã–µ –≤—ã–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –≤–∏–¥–µ –Ω–∞–±–æ—Ä–∞ —Ñ–∞–π–ª–æ–≤, –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –≤ —Å–ª–µ–¥—É—é—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ:

- `goods/goods.xml`: –ë–∞–∑–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã (–ø—Ä–æ–¥—É–∫—Ç—ã).
- `groups/groups.xml`: –ò–µ—Ä–∞—Ä—Ö–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π.
- `offers/offers.xml`: –¢–æ—Ä–≥–æ–≤—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (SKU), —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –±–∞–∑–æ–≤—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏.
- `prices/prices.xml`: –¶–µ–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ SKU.
- `rests/rests.xml`: –û—Å—Ç–∞—Ç–∫–∏ SKU –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö.
- `propertiesGoods/`: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ —Å–≤–æ–π—Å—Ç–≤ —Ç–æ–≤–∞—Ä–æ–≤.
- `propertiesOffers/`: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ —Å–≤–æ–π—Å—Ç–≤ SKU.
- `priceLists/priceLists.xml`: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–∏–ø–æ–≤ —Ü–µ–Ω.
- `storages/storages.xml`: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å–∫–ª–∞–¥–æ–≤.
- `units/units.xml`: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è.
- `contragents/contragents.xml`: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤.

    goods_*.xml
    contragents_*.xml
    groups_*.xml
    offers_*.xml
    priceLists_*.xml
    prices_*.xml
    propertiesGoods_*.xml
    propertiesOffers_*.xml
    rests_*.xml
    storages_*.xml
    units_*.xml

### 3.3 –ú–µ—Ç–æ–¥ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π **HTTP –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±–º–µ–Ω–∞** (–ø–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ 1–°-–ë–∏—Ç—Ä–∏–∫—Å), –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –Ω–∞–¥–µ–∂–Ω—É—é –ø–µ—Ä–µ–¥–∞—á—É –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ —á–∞–Ω–∫–∏—Ä–æ–≤–∞–Ω–∏–µ.

**–≠—Ç–∞–ø—ã –ø–µ—Ä–µ–¥–∞—á–∏:**
1.  **CheckAuth**: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Å—Ç–∞—Ä—Ç —Å–µ—Å—Å–∏–∏ (Basic Auth -> Session Cookie).
2.  **Init**: –ó–∞–ø—Ä–æ—Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞ (zip support, file limit).
3.  **File**: –ü–æ—Ç–æ–∫–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ —á–∞–Ω–∫–æ–≤ –∏ ZIP-–∞—Ä—Ö–∏–≤–æ–≤).
4.  **Import**: –¢—Ä–∏–≥–≥–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.

> **–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** –°–º. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è](transport-layer.md).

---

## 4. –°—Ö–µ–º—ã –º–∞–ø–ø–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã—Ö

–ù–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ (—Å–º. [–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ê](#–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ-–∞-–∞–Ω–∞–ª–∏–∑-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã-–¥–∞–Ω–Ω—ã—Ö-commerceml)) –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ö–µ–º—ã –º–∞–ø–ø–∏–Ω–≥–∞.

### 4.1 –ú–∞–ø–ø–∏–Ω–≥ –≤ –µ–¥–∏–Ω—É—é –º–æ–¥–µ–ª—å `Product`

–î–∞–Ω–Ω—ã–µ –∏–∑ `goods.xml` –∏ `offers.xml` –∞–≥—Ä–µ–≥–∏—Ä—É—é—Ç—Å—è –≤ –æ–¥–Ω—É –º–æ–¥–µ–ª—å `Product`. –ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å –≤ `Product` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ —Ç–æ—Ä–≥–æ–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ (SKU).

**–®–∞–≥ 1: –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ `Product` –∏–∑ `goods.xml`**

| –ü–æ–ª–µ –≤ `goods.xml` (`<–¢–æ–≤–∞—Ä>`) | –ü–æ–ª–µ –≤ –º–æ–¥–µ–ª–∏ `Product` (FREESPORT) | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| `<–ò–¥>` | `parent_onec_id` | –í—Ä–µ–º–µ–Ω–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π —Å–≤—è–∑–∏. |
| `<–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ>` | `name` | –í—Ä–µ–º–µ–Ω–Ω–æ–µ –±–∞–∑–æ–≤–æ–µ –∏–º—è. –ë—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω–æ. |
| `<–û–ø–∏—Å–∞–Ω–∏–µ>` | `description` | HTML-–æ–ø–∏—Å–∞–Ω–∏–µ. |
| `<–ì—Ä—É–ø–ø—ã><–ò–¥>` | `category_id` | –°–≤—è–∑—å —Å `Category.onec_id`. |
| `<–ó–Ω–∞—á–µ–Ω–∏—è–°–≤–æ–π—Å—Ç–≤>` | `specifications` | –ë–∞–∑–æ–≤—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞. –ë—É–¥—É—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã —Å–æ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ SKU. |

**–®–∞–≥ 2: –§–∏–Ω–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `Product` –∏–∑ `offers.xml`**

| –ü–æ–ª–µ –≤ `offers.xml` (`<–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ>`) | –ü–æ–ª–µ –≤ –º–æ–¥–µ–ª–∏ `Product` (FREESPORT) | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| `<–ò–¥>` (–≤–∏–¥–∞ `uuid#uuid`) | `onec_id`, `parent_onec_id` | `parent_onec_id` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–∏—Å–∫–∞ –∑–∞–ø–∏—Å–∏, —Å–æ–∑–¥–∞–Ω–Ω–æ–π –Ω–∞ –®–∞–≥–µ 1. `onec_id` —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º ID. |
| `<–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ>` | `name` | **–ü–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç** –±–∞–∑–æ–≤–æ–µ –∏–º—è. |
| `<–ê—Ä—Ç–∏–∫—É–ª>` | `sku` | –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –∞—Ä—Ç–∏–∫—É–ª. |
| `<–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏–¢–æ–≤–∞—Ä–∞>` | `specifications` | **–û–±—ä–µ–¥–∏–Ω—è–µ—Ç—Å—è** —Å –±–∞–∑–æ–≤—ã–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏. |
| `prices.xml` -> `<–¶–µ–Ω—ã>` | `retail_price`, `opt1_price` –∏ —Ç.–¥. | –¶–µ–Ω—ã –º–∞–ø—è—Ç—Å—è –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è. |
| `rests.xml` -> `<–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ>` | `stock_quantity` | –û—Å—Ç–∞—Ç–∫–∏ —Å—É–º–º–∏—Ä—É—é—Ç—Å—è –∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è. |


### 4.2 –ú–∞–ø–ø–∏–Ω–≥ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤

| –§–∞–π–ª-—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ | –ú–æ–¥–µ–ª—å –≤ FREESPORT | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| :--- | :--- | :--- |
| `groups.xml` | `Category` | –°–æ–∑–¥–∞–Ω–∏–µ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π. |
| `priceLists.xml` | `PriceType` | –ú–∞–ø–ø–∏–Ω–≥ —Ç–∏–ø–æ–≤ —Ü–µ–Ω 1–° –Ω–∞ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. |
| `storages.xml` | `(–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)` | –û—Å—Ç–∞—Ç–∫–∏ –∞–≥—Ä–µ–≥–∏—Ä—É—é—Ç—Å—è, –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ —Å–∫–ª–∞–¥–∞–º –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è. |
| `units.xml` | `Unit` | –ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è. |
| `propertiesGoods/` | `Attribute`, `AttributeValue`, `Attribute1CMapping`, `AttributeValue1CMapping`, `Brand` | –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ —Å –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–µ–π –∏ **–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±—Ä–µ–Ω–¥–∞** (–µ—Å–ª–∏ –æ–Ω –∑–∞–¥–∞–Ω –∫–∞–∫ —Å–≤–æ–π—Å—Ç–≤–æ). |
| `propertiesOffers/` | `Attribute`, `AttributeValue`, `Attribute1CMapping`, `AttributeValue1CMapping` | –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –¥–ª—è SKU —Å –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–µ–π. |

> **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ (Story 14.3):**  
> –ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∏–∑ 1–° –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π (lowercase, —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–±–µ–ª–æ–≤).  
> –ê—Ç—Ä–∏–±—É—Ç—ã —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ `normalized_name` –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ –µ–¥–∏–Ω—É—é master-—Å—É—â–Ω–æ—Å—Ç—å.  
> –í—Å–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ `onec_id` —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ –º–∞–ø–ø–∏–Ω–≥–æ–≤ (`Attribute1CMapping`, `AttributeValue1CMapping`). |

### 4.3 –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π (`contragents.xml`)

| –ü–æ–ª–µ –≤ `contragents.xml` (`<–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç>`) | –ü–æ–ª–µ –≤ –º–æ–¥–µ–ª–∏ `User` (FREESPORT) | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| `<–ò–¥>` | `onec_id` | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á –¥–ª—è —Å–≤—è–∑–∏. |
| `<–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ>` | `company_name` / `first_name`, `last_name` | –ü–∞—Ä—Å–∏—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ (—é—Ä/—Ñ–∏–∑ –ª–∏—Ü–æ). |
| `<–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ>` | `company_name` | –î–ª—è —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü. |
| `<–†–æ–ª—å>` | `role` | –ú–∞–ø–∏—Ç—Å—è –Ω–∞ —Ä–æ–ª–∏ –≤ —Å–∏—Å—Ç–µ–º–µ (retail, wholesale_level1 –∏ —Ç.–¥.). |
| `<–ö–æ–Ω—Ç–∞–∫—Ç—ã>` -> `<–ö–æ–Ω—Ç–∞–∫—Ç>` | `email`, `phone` | –ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –¢–∏–ø –∫–æ–Ω—Ç–∞–∫—Ç–∞ (email/—Ç–µ–ª–µ—Ñ–æ–Ω) –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ `<–¢–∏–ø>`. |
| `<–ê–¥—Ä–µ—Å–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏>` | `legal_address` | –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å. |
| `<–†–µ–∫–≤–∏–∑–∏—Ç—ã>` -> `<–ò–ù–ù>` | `tax_id` | –ò–ù–ù –¥–ª—è B2B –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. |

---

## 5. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 5.1 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–ª–æ—è: **Transport Layer** (–ü—Ä–∏–µ–º –¥–∞–Ω–Ω—ã—Ö) –∏ **Processing Layer** (–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö).

```mermaid
graph TD
    subgraph "Transport Layer (Sync)"
        req[HTTP Request] --> View[ICExchangeView]
        View -- Auth --> Auth[Basic1CAuthentication]
        View -- "mode=file" --> FSS[FileStreamService]
        FSS --> Temp[Media: 1c_temp/session_id/]
        View -- "mode=import" --> Router[FileRoutingService]
        Router -- Unpack/Move --> ImportDir[Media: 1c_import/]
    end

    subgraph "Processing Layer (Async)"
        Router -- Trigger --> Celery[Celery Task]
        Celery --> SVC[Import Service]
        SVC --> Parser[XML Parser]
        SVC --> DB[(PostgreSQL)]
    end
```

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Transport Layer:**
- **ICExchangeView**: –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ø–æ `mode`.
- **FileStreamService**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Ç–æ–∫–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏, —Å–±–æ—Ä–∫–∞ —á–∞–Ω–∫–æ–≤ –≤ —Ñ–∞–π–ª—ã.
- **FileRoutingService**: –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ (goods, offers, images) –≤ —Ü–µ–ª–µ–≤—ã–µ –ø–∞–ø–∫–∏.

> **–í–∞–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è (ADR):**
> - [ADR-008](../../decisions/ADR-008-1c-sessid-session-key-not-csrf.md): –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Django Session Key –∫–∞–∫ `sessid`.
> - [ADR-009](../../decisions/ADR-009-csrf-exemption-1c-protocol.md): –û—Ç–∫–ª—é—á–µ–Ω–∏–µ CSRF –¥–ª—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –æ–±–º–µ–Ω–∞.

### 5.2 (Legacy) –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Management Commands
*(–°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∏)*

```mermaid
graph TD
    A[Management Commands] --> B[Import Service]
    B --> C[Data Parser]
    B --> D[Data Validator]
    B --> E[Data Processor]
    
    C --> F[Catalog Parser]
    C --> G[Offers Parser] 
    C --> H[Customers Parser]
    
    D --> I[Field Validation]
    D --> J[Business Rules]
    D --> K[Data Integrity]
    
    E --> L[Category Creator]
    E --> M[Brand Creator]
    E --> N[Product Creator/Updater]
    E --> O[Customer Creator/Updater]
    
    L --> P[Django Models]
    M --> P
    N --> P
    O --> P
    
    Q[Progress Monitor] --> A
    R[Error Handler] --> A
    S[Audit Logger] --> A
    T[Customer Resolver] --> O
```

### 5.2 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Management Commands

```python
# apps/products/management/commands/
class ImportFrom1CCommand(BaseCommand):
    """–ë–∞–∑–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –∏–∑ 1–°"""
    
    def add_arguments(self, parser):
        parser.add_argument('--file', required=True, help='–ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –¥–∞–Ω–Ω—ã—Ö')
        parser.add_argument('--type', choices=['catalog', 'offers', 'customers'], required=True)
        parser.add_argument('--dry-run', action='store_true')
        parser.add_argument('--chunk-size', type=int, default=100)

class ImportCustomersCommand(ImportFrom1CCommand):
    """–ò–º–ø–æ—Ä—Ç —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏–∑ 1–°"""
    help = "–ò–º–ø–æ—Ä—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏–∑ 1–° (customers)"

class SyncCustomersCommand(BaseCommand):
    """–î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤"""
    help = "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –º–µ–∂–¥—É –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π –∏ 1–°"

class ExportNewCustomersCommand(BaseCommand):
    """–≠–∫—Å–ø–æ—Ä—Ç –Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ 1–°"""
    help = "–≠–∫—Å–ø–æ—Ä—Ç –Ω–æ–≤—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –≤ 1–°"
```

### 5.3 –ú–æ–¥–µ–ª–∏ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏

```python
# apps/users/models.py
class User(AbstractUser):
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
    
    # –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å 1–°
    onec_id = models.CharField('ID –≤ 1–°', max_length=100, blank=True, null=True, unique=True)
    sync_status = models.CharField(
        '–°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏',
        max_length=20,
        choices=[
            ('pending', '–û–∂–∏–¥–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏'),
            ('synced', '–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω'),
            ('error', '–û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏'),
            ('conflict', '–ö–æ–Ω—Ñ–ª–∏–∫—Ç –¥–∞–Ω–Ω—ã—Ö'),
        ],
        default='pending'
    )
    sync_error_message = models.TextField('–û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏', blank=True)
    last_sync_at = models.DateTimeField('–ü–æ—Å–ª–µ–¥–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è', null=True, blank=True)
    
    # –§–ª–∞–≥–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö
    created_in_1c = models.BooleanField('–°–æ–∑–¥–∞–Ω –≤ 1–°', default=False)
    needs_1c_export = models.BooleanField('–¢—Ä–µ–±—É–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ 1–°', default=False)

class CustomerSyncLog(models.Model):
    """–õ–æ–≥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤"""
    
    OPERATION_TYPES = [
        ('import_from_1c', '–ò–º–ø–æ—Ä—Ç –∏–∑ 1–°'),
        ('export_to_1c', '–≠–∫—Å–ø–æ—Ä—Ç –≤ 1–°'),
        ('sync_changes', '–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π'),
    ]
    
    operation_type = models.CharField('–¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏', max_length=20, choices=OPERATION_TYPES)
    customer = models.ForeignKey(User, on_delete=models.CASCADE, null=True, blank=True)
    customer_email = models.EmailField('Email –∫–ª–∏–µ–Ω—Ç–∞', blank=True)
    
    status = models.CharField('–°—Ç–∞—Ç—É—Å', max_length=20, choices=[
        ('success', '–£—Å–ø–µ—à–Ω–æ'),
        ('error', '–û—à–∏–±–∫–∞'),
        ('skipped', '–ü—Ä–æ–ø—É—â–µ–Ω–æ'),
    ])
    
    details = models.JSONField('–î–µ—Ç–∞–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏', default=dict)
    error_message = models.TextField('–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ', blank=True)
    
    created_at = models.DateTimeField('–î–∞—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏', auto_now_add=True)
    
    class Meta:
        verbose_name = '–õ–æ–≥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤'
        verbose_name_plural = '–õ–æ–≥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤'
        db_table = 'customer_sync_logs'
        ordering = ['-created_at']
```

---

## 6. –ü—Ä–æ—Ü–µ—Å—Å—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

–ü—Ä–æ—Ü–µ—Å—Å –∏–º–ø–æ—Ä—Ç–∞ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ **–¥–≤—É—Ö—ç—Ç–∞–ø–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ** –¥–∞–Ω–Ω—ã—Ö: —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è "–∑–∞–≥–æ—Ç–æ–≤–∫–∏" —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ `goods.xml`, –∞ –∑–∞—Ç–µ–º –æ–Ω–∏ –æ–±–æ–≥–∞—â–∞—é—Ç—Å—è –∏ —Ñ–∏–Ω–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ `offers.xml`.

### 6.1 –í–æ—Ä–∫—Ñ–ª–æ—É –∏–º–ø–æ—Ä—Ç–∞ –∫–∞—Ç–∞–ª–æ–≥–∞

```python
def unified_import_workflow(import_directory):
    """
    –í–æ—Ä–∫—Ñ–ª–æ—É –∏–º–ø–æ—Ä—Ç–∞ —Å –∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö –≤ –µ–¥–∏–Ω—É—é –º–æ–¥–µ–ª—å Product.
    """
    # –®–∞–≥ 1: –ò–º–ø–æ—Ä—Ç —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –±—Ä–µ–Ω–¥—ã –∏ —Ç.–¥.)
    import_reference_data(import_directory)

    # –®–∞–≥ 2: –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ goods.xml
    # –°–æ–∑–¥–∞—é—Ç—Å—è "–∑–∞–≥–æ—Ç–æ–≤–∫–∏" —Å –±–∞–∑–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π.
    create_product_placeholders('goods/goods.xml')
    
    # –®–∞–≥ 3: –û–±–æ–≥–∞—â–µ–Ω–∏–µ –∏ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ offers.xml
    # –ó–∞–ø–æ–ª–Ω—è—é—Ç—Å—è —Ü–µ–Ω—ã, –æ—Å—Ç–∞—Ç–∫–∏, –∞—Ä—Ç–∏–∫—É–ª—ã –∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è.
    enrich_products_from_offers(
        files=[
            'offers.xml',
            'prices.xml',
            'rests.xml'
        ]
    )
    
    # –®–∞–≥ 4: –î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤
    deactivate_stale_products(import_session_id)
    
    # –®–∞–≥ 5: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞
    generate_import_report(import_session_id)
```

### 6.2 –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è —à–∞–≥–æ–≤

#### –®–∞–≥ 1: `import_reference_data`

- –ü–∞—Ä—Å–∏—Ç `groups.xml` –∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ —Å–≤–æ–π—Å—Ç–≤.
- –°–æ–∑–¥–∞–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç `Category` –∏ `Brand`.

#### –®–∞–≥ 2: `create_product_placeholders`

- –ü–∞—Ä—Å–∏—Ç `goods.xml`.
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ `<–¢–æ–≤–∞—Ä>`:
  - –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å `Product`.
  - –ó–∞–ø–æ–ª–Ω—è–µ—Ç `name` (–≤—Ä–µ–º–µ–Ω–Ω–æ), `description`, `category`, `brand`.
  - **–í–∞–∂–Ω–æ:** –°–æ—Ö—Ä–∞–Ω—è–µ—Ç ID —Ç–æ–≤–∞—Ä–∞ –≤ –ø–æ–ª–µ `parent_onec_id`.
  - `is_active` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `False`.

#### –®–∞–≥ 3: `enrich_products_from_offers`

- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø–∞—Ä—Å–∏—Ç `offers.xml`, `prices.xml`, `rests.xml`.
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ `<–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ>` –≤ `offers.xml`:
  - –ò–∑–≤–ª–µ–∫–∞–µ—Ç `parent_onec_id` –∏–∑ —Å–æ—Å—Ç–∞–≤–Ω–æ–≥–æ ID (`uuid#uuid`).
  - –ù–∞—Ö–æ–¥–∏—Ç `Product` –ø–æ `parent_onec_id`.
  - –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω:
    - **–û–±–Ω–æ–≤–ª—è–µ—Ç** –∑–∞–ø–∏—Å—å:
      - `name` –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∏–º–µ–Ω–µ–º –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.
      - `sku` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏–∑ –∞—Ä—Ç–∏–∫—É–ª–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.
      - `onec_id` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏–∑ ID –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.
      - `specifications` –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è.
      - –¶–µ–Ω—ã –∏ –æ—Å—Ç–∞—Ç–∫–∏ (–∏–∑ `prices.xml` –∏ `rests.xml`) –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫ –∑–∞–ø–∏—Å–∏.
      - `is_active` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ `True`.
  - –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω, –ª–æ–≥–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫—É (SKU –±–µ–∑ –±–∞–∑–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞).

---

### 6.3 –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–æ—Ä–∫—Ñ–ª–æ—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤

–î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –æ–± –æ—Å—Ç–∞—Ç–∫–∞—Ö –Ω–∞ —Å–∫–ª–∞–¥–µ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π, –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —á–∞—â–µ, —á–µ–º –ø–æ–ª–Ω—ã–π –∏–º–ø–æ—Ä—Ç –∫–∞—Ç–∞–ª–æ–≥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∂–¥—ã–µ 15-30 –º–∏–Ω—É—Ç).

**–ö–æ–º–∞–Ω–¥–∞:** `load_product_stocks`
**–ò—Å—Ç–æ—á–Ω–∏–∫:** `rests.xml`

#### –í–æ—Ä–∫—Ñ–ª–æ—É `load_product_stocks`

```python
def update_stocks_workflow(import_directory):
    """
    –í–æ—Ä–∫—Ñ–ª–æ—É –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤.
    """
    # –®–∞–≥ 1: –ù–∞—á–∞–ª–æ —Å–µ—Å—Å–∏–∏ –∏–º–ø–æ—Ä—Ç–∞ (–¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏)
    session = ImportSession.objects.create(type='stocks')
    
    # –®–∞–≥ 2: –ü–∞—Ä—Å–∏–Ω–≥ —Ñ–∞–π–ª–∞ —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏
    stock_data = parse_stock_file('rests.xml')
    
    # –®–∞–≥ 3: –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤
    # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è bulk_update –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    update_stock_quantities(stock_data, session)
    
    # –®–∞–≥ 4: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏
    session.status = 'completed'
    session.save()
    
    # –®–∞–≥ 5: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫—Ä–∞—Ç–∫–æ–≥–æ –æ—Ç—á–µ—Ç–∞
    generate_stock_update_report(session)
```

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**

- **–ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å:** –ü—Ä–æ—Ü–µ—Å—Å –æ–±–µ—Ä–Ω—É—Ç –≤ `ImportSession`, —á—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö.
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (`bulk_update`) –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.
- **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å:** –≠—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ–ª—è, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏ (`stock_quantity`), –∏ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥—Ä—É–≥—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–≤–∞—Ä–µ.

## 7. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π

### 7.1 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤

```mermaid
sequenceDiagram
    participant Site as FREESPORT Platform
    participant Sync as Sync Service
    participant 1C as 1–°:–£–¢
    
    Note over Site,1C: –ò–º–ø–æ—Ä—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
    1C->>Sync: –í—ã–≥—Ä—É–∑–∫–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤
    Sync->>Site: –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    
    Note over Site,1C: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
    Site->>Sync: –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
    Sync->>1C: –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ –≤ 1–°
    1C-->>Sync: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ + onec_id
    Sync->>Site: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ onec_id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    
    Note over Site,1C: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞
    Site->>Sync: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑–º–µ–Ω–∏–ª –ø—Ä–æ—Ñ–∏–ª—å
    Sync->>1C: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞
    
    1C->>Sync: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ 1–°
    Sync->>Site: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

### 7.2 –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

**–ü—Ä–∏–Ω—Ü–∏–ø:** 1C –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã. –í—Å–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ä–∞–∑—Ä–µ—à–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

```python
class CustomerConflictResolver:
    """–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤: 1C –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã"""
    
    def resolve_conflict(self, existing_customer, onec_data, conflict_source):
        """
        –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è: onec_wins
        
        Args:
            existing_customer: –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–ª–∏–µ–Ω—Ç –≤ –ë–î
            onec_data: –î–∞–Ω–Ω—ã–µ –∏–∑ 1–°
            conflict_source: 'portal_registration' –∏–ª–∏ 'data_import'
        """
        with transaction.atomic():
            # –ê—Ä—Ö–∏–≤–∏—Ä—É–µ–º —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ
            platform_data = self._serialize_customer(existing_customer)
            
            if conflict_source == 'portal_registration':
                # –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å, –ù–ï –∏–∑–º–µ–Ω—è—è –¥–∞–Ω–Ω—ã–µ –∏–∑ 1–°
                existing_customer.is_confirmed_client = True
                existing_customer.save()
            
            elif conflict_source == 'data_import':
                # –û–±–æ–≥–∞—â–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å –∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –ø–æ–ª—è
                existing_customer.onec_id = onec_data.get('onec_id')
                existing_customer.onec_guid = onec_data.get('onec_guid')
                
                # –ü–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤—Å–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –ø–æ–ª—è –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ 1–°
                for field in self.CONFLICTING_FIELDS:
                    if new_value := onec_data.get(field):
                        setattr(existing_customer, field, new_value)
                
                existing_customer.last_sync_from_1c = timezone.now()
                existing_customer.save()
            
            # –°–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å –≤ SyncConflict –¥–ª—è –∞—É–¥–∏—Ç–∞
            self._create_sync_conflict_record(
                existing_customer, platform_data, onec_data, conflict_source
            )
            
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
            self._send_notification(
                existing_customer, platform_data, onec_data, conflict_source
            )
```

### 7.3 Workflow —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤

```python
def sync_customers_workflow():
    """–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤"""
    
    # –®–∞–≥ 1: –ò–º–ø–æ—Ä—Ç –Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏–∑ 1–°
    new_1c_customers = import_customers_from_1c()
    for customer_data in new_1c_customers:
        create_or_update_platform_customer(customer_data)
    
    # –®–∞–≥ 2: –≠–∫—Å–ø–æ—Ä—Ç –Ω–æ–≤—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π –≤ 1–°
    new_platform_customers = get_customers_needing_export()
    for customer in new_platform_customers:
        export_customer_to_1c(customer)
    
    # –®–∞–≥ 3: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
    updated_customers = get_updated_customers_since_last_sync()
    for customer in updated_customers:
        sync_customer_changes(customer)
    
    # –®–∞–≥ 4: –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
    conflicts = detect_customer_conflicts()
    resolve_customer_conflicts(conflicts)
    
    # –®–∞–≥ 5: –û—Ç—á–µ—Ç –æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
    generate_customer_sync_report()

def create_or_update_platform_customer(customer_data_from_1c):
    """–°–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ"""
    
    # –ü–æ–∏—Å–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
    existing_customer = find_customer_by_identifiers(
        email=customer_data_from_1c.get('email'),
        onec_id=customer_data_from_1c.get('onec_id'),
        phone=customer_data_from_1c.get('phone')
    )
    
    if existing_customer:
        # –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
        update_customer_from_1c_data(existing_customer, customer_data_from_1c)
    else:
        # –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
        create_customer_from_1c_data(customer_data_from_1c)

def export_customer_to_1c(platform_customer):
    """–≠–∫—Å–ø–æ—Ä—Ç –∫–ª–∏–µ–Ω—Ç–∞ —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –≤ 1–°"""
    
    # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞
    export_data = prepare_customer_export_data(platform_customer)
    
    # –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ 1–°
    result = send_customer_to_1c(export_data)
    
    if result.success:
        # –û–±–Ω–æ–≤–ª—è–µ–º onec_id –∏ —Å—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
        platform_customer.onec_id = result.onec_id
        platform_customer.sync_status = 'synced'
        platform_customer.needs_1c_export = False
        platform_customer.last_sync_at = timezone.now()
        platform_customer.save()
        
        # –õ–æ–≥–∏—Ä—É–µ–º —É—Å–ø–µ—Ö
        CustomerSyncLog.objects.create(
            operation_type='export_to_1c',
            customer=platform_customer,
            status='success',
            details={'onec_id': result.onec_id}
        )
    else:
        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
        handle_customer_export_error(platform_customer, result.error)
```

### 7.4 –°–µ—Ä–≤–∏—Å—ã –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤

```python
class CustomerIdentityResolver:
    """–°–µ—Ä–≤–∏—Å –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –º–µ–∂–¥—É —Å–∏—Å—Ç–µ–º–∞–º–∏"""
    
    def find_customer_by_identifiers(self, **identifiers):
        """–ü–æ–∏—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º"""
        
        # –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ–∏—Å–∫–∞: onec_id > email > phone + name
        if identifiers.get('onec_id'):
            customer = User.objects.filter(onec_id=identifiers['onec_id']).first()
            if customer:
                return customer
        
        if identifiers.get('email'):
            customer = User.objects.filter(email=identifiers['email']).first()
            if customer:
                return customer
        
        # –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É + –§–ò–û (–¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏)
        if identifiers.get('phone') and identifiers.get('full_name'):
            # –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ–ª—è–º
            return self.fuzzy_search_customer(identifiers)
        
        return None
    
    def fuzzy_search_customer(self, identifiers):
        """–ù–µ—á–µ—Ç–∫–∏–π –ø–æ–∏—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ —á–∞—Å—Ç–∏—á–Ω—ã–º –¥–∞–Ω–Ω—ã–º"""
        # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –Ω–µ—á–µ—Ç–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
        pass

class CustomerDataMapper:
    """–ú–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –º–µ–∂–¥—É —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ 1–° –∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã"""
    
    def map_1c_to_platform(self, customer_data_1c):
        """–ú–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞ –∏–∑ 1–° –≤ —Ñ–æ—Ä–º–∞—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã"""
        return {
            'email': customer_data_1c.get('email'),
            'first_name': customer_data_1c.get('first_name'),
            'last_name': customer_data_1c.get('last_name'),
            'phone': customer_data_1c.get('phone'),
            'company_name': customer_data_1c.get('company_name'),
            'tax_id': customer_data_1c.get('inn'),
            'role': self.map_1c_customer_type_to_platform_role(
                customer_data_1c.get('customer_type')
            ),
            'is_verified': customer_data_1c.get('is_verified', False),
            'onec_id': customer_data_1c.get('id'),
            'created_in_1c': True,
            'sync_status': 'synced',
        }
    
    def map_platform_to_1c(self, platform_customer):
        """–ú–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞ –∏–∑ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –≤ —Ñ–æ—Ä–º–∞—Ç 1–°"""
        customer_type = 'individual' if not platform_customer.company_name else 'legal_entity'
        
        base_data = {
            'email': platform_customer.email,
            'phone': platform_customer.phone,
            'customer_type': customer_type,
            'platform_id': platform_customer.id,
        }
        
        if customer_type == 'individual':
            base_data.update({
                'first_name': platform_customer.first_name,
                'last_name': platform_customer.last_name,
            })
        else:
            base_data.update({
                'company_name': platform_customer.company_name,
                'tax_id': platform_customer.tax_id,
                'contact_person': f"{platform_customer.first_name} {platform_customer.last_name}",
            })
        
        return base_data
```

---

## 8. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### 8.1 –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

```python
class IntegrationErrorHandler:
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏"""
    
    ERROR_STRATEGIES = {
        'validation_error': 'skip_and_log',
        'database_error': 'retry_with_backoff',
        'file_parse_error': 'stop_and_report',
        'customer_conflict': 'auto_resolve_onec_wins',
        'duplicate_customer': 'auto_resolve_onec_wins',
        '1c_api_error': 'retry_with_exponential_backoff',
    }
    
    def handle_customer_sync_error(self, error_type, error_data, context):
        """–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤"""
        
        if error_type in ('customer_conflict', 'duplicate_customer'):
            # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ: 1C –≤—Å–µ–≥–¥–∞ –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
            return self.auto_resolve_conflict(error_data, context)
        else:
            return self.handle_generic_error(error_type, error_data, context)

class CustomerSyncMonitor:
    """–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤"""
    
    def generate_sync_dashboard_data(self):
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏"""
        
        return {
            'customers_synced_today': self.get_customers_synced_today(),
            'auto_resolved_conflicts_today': self.get_auto_resolved_conflicts_count(),
            'sync_errors_last_24h': self.get_recent_errors(),
            'export_queue_size': self.get_export_queue_size(),
            'last_successful_import': self.get_last_successful_import(),
        }
```

### 8.2 –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```python
class CustomerSyncLogger:
    """–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤"""
    
    def log_customer_import(self, customer_data, result):
        """–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞"""
        CustomerSyncLog.objects.create(
            operation_type='import_from_1c',
            customer_email=customer_data.get('email'),
            customer=result.customer if result.success else None,
            status='success' if result.success else 'error',
            details={
                '1c_customer_id': customer_data.get('id'),
                'import_timestamp': timezone.now().isoformat(),
                'data_source': '1c_export'
            },
            error_message=result.error_message if not result.success else ''
        )
    
    def log_customer_export(self, platform_customer, result):
        """–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞"""
        CustomerSyncLog.objects.create(
            operation_type='export_to_1c',
            customer=platform_customer,
            customer_email=platform_customer.email,
            status='success' if result.success else 'error',
            details={
                'platform_customer_id': platform_customer.id,
                'export_timestamp': timezone.now().isoformat(),
                '1c_response': result.response_data
            },
            error_message=result.error_message if not result.success else ''
        )
```

---

## 9. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### 9.1 –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤

```python
class CustomerDataSecurity:
    """–û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤"""
    
    SENSITIVE_FIELDS = ['phone', 'tax_id', 'passport_data', 'birth_date']
    
    def sanitize_customer_data(self, customer_data):
        """–°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞ –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π"""
        
        sanitized = {}
        for field, value in customer_data.items():
            if field in self.SENSITIVE_FIELDS:
                # –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ—á–∏—Å—Ç–∫–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
                sanitized[field] = self.validate_sensitive_field(field, value)
            else:
                sanitized[field] = self.clean_general_field(field, value)
        
        return sanitized
    
    def validate_sensitive_field(self, field_name, value):
        """–í–∞–ª–∏–¥–∞—Ü–∏—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π"""
        if field_name == 'phone':
            return self.validate_phone_number(value)
        elif field_name == 'tax_id':
            return self.validate_tax_id(value)
        # ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
        return value

class CustomerDataEncryption:
    """–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤"""
    
    def encrypt_customer_export_data(self, customer_data):
        """–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞"""
        # –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ 1–°
        pass
```

### 9.2 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```python
class CustomerSyncOptimizer:
    """–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏"""
    
    def bulk_import_customers(self, customers_data):
        """–ú–∞—Å—Å–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤"""
        
        # –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
        new_customers = []
        existing_customers_updates = []
        
        for customer_data in customers_data:
            if self.customer_exists(customer_data):
                existing_customers_updates.append(customer_data)
            else:
                new_customers.append(customer_data)
        
        # Bulk –æ–ø–µ—Ä–∞—Ü–∏–∏
        if new_customers:
            self.bulk_create_customers(new_customers)
        
        if existing_customers_updates:
            self.bulk_update_customers(existing_customers_updates)
    
    def optimize_customer_queries(self):
        """–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤"""
        # –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
        # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
        pass
```

---

## 10. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 10.1 Story 3.1: –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å 1–° ‚úÖ

**–°—Ç–∞—Ç—É—Å:** –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**Deliverables:**

- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å 1–° (–¥–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç)
- ‚úÖ –ó–∞–ø—Ä–æ—Å –∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—É 1–° —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏
- ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π
- ‚è≥ –°—Ö–µ–º—ã –º–∞–ø–ø–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã—Ö (–æ–∂–∏–¥–∞–µ–º –æ—Ç–≤–µ—Ç –æ—Ç 1–°)

---

### 10.2 Story 3.2: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ 1–°

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è Dev Agent (James):**

#### **–°–æ–∑–¥–∞—Ç—å Django management commands:**

```python
# apps/products/management/commands/import_catalog_from_1c.py
class Command(BaseCommand):
    help = "–ò–º–ø–æ—Ä—Ç –∫–∞—Ç–∞–ª–æ–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ —Ñ–∞–π–ª–∞ 1–°"
    
    def add_arguments(self, parser):
        parser.add_argument('--file', required=True, help='–ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –¥–∞–Ω–Ω—ã—Ö')
        parser.add_argument('--dry-run', action='store_true', help='–¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫')
        parser.add_argument('--chunk-size', type=int, default=100, help='–†–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞')

# apps/products/management/commands/import_offers_from_1c.py
class Command(BaseCommand):
    help = "–ò–º–ø–æ—Ä—Ç —Ü–µ–Ω –∏ –æ—Å—Ç–∞—Ç–∫–æ–≤ –∏–∑ —Ñ–∞–π–ª–∞ 1–°"

# apps/users/management/commands/import_customers_from_1c.py  
class Command(BaseCommand):
    help = "–ò–º–ø–æ—Ä—Ç —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏–∑ 1–°"

# apps/users/management/commands/sync_customers_with_1c.py
class Command(BaseCommand):
    help = "–î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å 1–°"
```

#### **–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö:**

```python
# apps/products/services/data_parser.py
class DataParser:
    """–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ 1–°"""
    
# apps/users/services/customer_sync_service.py
class CustomerSyncService:
    """–°–µ—Ä–≤–∏—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤"""
    
# apps/common/services/import_validator.py
class ImportDataValidator:
    """–í–∞–ª–∏–¥–∞—Ç–æ—Ä –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö"""
```

#### **–û–±–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª–∏:**

```python
# –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –≤ User model –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å 1–°
onec_id = models.CharField('ID –≤ 1–°', max_length=100, blank=True, null=True, unique=True)
sync_status = models.CharField('–°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏', ...)
created_in_1c = models.BooleanField('–°–æ–∑–¥–∞–Ω –≤ 1–°', default=False)
needs_1c_export = models.BooleanField('–¢—Ä–µ–±—É–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ 1–°', default=False)

# –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å CustomerSyncLog –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```

---

### 10.3 Acceptance Criteria –¥–ª—è –≤—Å–µ—Ö Stories

**Story 3.2 - –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**

- [ ] –°–æ–∑–¥–∞–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `import_catalog_from_1c`
- [ ] –°–æ–∑–¥–∞–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `import_customers_from_1c`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –±–∞–∑–æ–≤—ã–π –ø–∞—Ä—Å–µ—Ä –¥–∞–Ω–Ω—ã—Ö (–±—É–¥–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∞–Ω –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ 1–°)
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏–º–ø–æ—Ä—Ç–∞
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω—ã –º–æ–¥–µ–ª–∏ User –∏ Product –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å 1–°
- [ ] –°–æ–∑–¥–∞–Ω–∞ –º–æ–¥–µ–ª—å CustomerSyncLog
- [ ] –°–æ–∑–¥–∞–Ω—ã unit —Ç–µ—Å—Ç—ã –¥–ª—è –±–∞–∑–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**Story 3.3 - –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤:**

- [ ] –°–æ–∑–¥–∞–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `load_test_catalog`
- [ ] –°–æ–∑–¥–∞–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `sync_customers_with_1c`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –±—Ä–µ–Ω–¥–æ–≤
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏
- [ ] –°–æ–∑–¥–∞–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã backup/restore –¥–∞–Ω–Ω—ã—Ö
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ batch –æ–ø–µ—Ä–∞—Ü–∏–π

**Story 3.4 - –¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞:**

- [ ] –ó–∞–≥—Ä—É–∂–µ–Ω–æ –º–∏–Ω–∏–º—É–º 500 —Ç–æ–≤–∞—Ä–æ–≤
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Ü–µ–Ω—ã –¥–ª—è –≤—Å–µ—Ö 7 —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –°–æ–∑–¥–∞–Ω—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å–≤—è–∑–µ–π
- [ ] –ó–∞–ø—É—â–µ–Ω—ã —Ç–µ—Å—Ç—ã –Ω–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**Story 3.5 - –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤:**

- [ ] –°–æ–∑–¥–∞–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `load_product_stocks`
- [ ] –ó–∞–≥—Ä—É–∂–µ–Ω—ã –æ—Å—Ç–∞—Ç–∫–∏ –¥–ª—è –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ `is_in_stock`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ `can_be_ordered`
- [ ] API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –Ω–∞–ª–∏—á–∏–∏

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å 1–° –≤ —Ä–∞–º–∫–∞—Ö Epic 3, –≤–∫–ª—é—á–∞—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç **—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π**.

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**

‚úÖ **–¢—Ä–µ—Ö—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:** —Ç–æ–≤–∞—Ä—ã + –∫–ª–∏–µ–Ω—Ç—ã + –∑–∞–∫–∞–∑—ã  
‚úÖ **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ + —Ä—É—á–Ω–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è  
‚úÖ **Identity Resolution:** –Ω–∞–¥–µ–∂–Ω–∞—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –º–µ–∂–¥—É —Å–∏—Å—Ç–µ–º–∞–º–∏  
‚úÖ **Audit Trail:** –ø–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏  
‚úÖ **Performance:** batch –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã  
‚úÖ **Security:** –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –∑–∞—â–∏—Ç–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤  

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

1. **–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—É 1–°**

    - –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã

2. **–î–æ—Ä–∞–±–æ—Ç–∞—Ç—å —Ä–∞–∑–¥–µ–ª—ã 3-4**

    - —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ö–µ–º—ã –º–∞–ø–ø–∏–Ω–≥–∞

3. **–ü–µ—Ä–µ–¥–∞—Ç—å Dev Agent (James)**

    - –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Stories 3.2-3.5

**–ì–æ—Ç–æ–≤–æ –∫ –ø–µ—Ä–µ–¥–∞—á–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏! üöÄ*

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ê: –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö CommerceML

–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö, –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –∏–∑ 1–° –≤ —Ñ–æ—Ä–º–∞—Ç–µ CommerceML 3.1, –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ —Ñ–∞–π–ª–æ–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `data\import_1c`.

### –ê.1 –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤—ã–≥—Ä—É–∑–∫–∏

–í—ã–≥—Ä—É–∑–∫–∞ –∏–º–µ–µ—Ç –º–æ–¥—É–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É. –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ, –∞ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –ø–æ —Ä–∞–∑–Ω—ã–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º –∏ —Ñ–∞–π–ª–∞–º, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —è–≤–ª—è–µ—Ç—Å—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–º –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Ç–∏–ø –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

**–ö–ª—é—á–µ–≤—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ —Ñ–∞–π–ª—ã:**

- `goods/goods.xml`: –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–∞—Ö (–ø—Ä–æ–¥—É–∫—Ç–∞—Ö).
- `groups/groups.xml`: –ò–µ—Ä–∞—Ä—Ö–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–æ–≤–∞—Ä–æ–≤.
- `offers/offers.xml`: –¢–æ—Ä–≥–æ–≤—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (SKU), –≤–∞—Ä–∏–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤.
- `prices/prices.xml`: –¶–µ–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ SKU.
- `rests/rests.xml`: –û—Å—Ç–∞—Ç–∫–∏ SKU –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö.
- `propertiesGoods/`: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ —Å–≤–æ–π—Å—Ç–≤ —Ç–æ–≤–∞—Ä–æ–≤ –∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π.
- `propertiesOffers/`: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ —Å–≤–æ–π—Å—Ç–≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π (SKU).
- `priceLists/priceLists.xml`: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–∏–ø–æ–≤ —Ü–µ–Ω.
- `storages/storages.xml`: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å–∫–ª–∞–¥–æ–≤.
- `units/units.xml`: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è.
- `contragents/contragents.xml`: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤ (–∫–ª–∏–µ–Ω—Ç–æ–≤).

### –ê.2 –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ñ–∞–π–ª–æ–≤

#### –ê.2.1 `goods/goods.xml` - –¢–æ–≤–∞—Ä—ã (–ü—Ä–æ–¥—É–∫—Ç—ã)

- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π –±–∞–∑–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã.
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**: `<–ö–∞—Ç–∞–ª–æ–≥>` -> `<–¢–æ–≤–∞—Ä—ã>` -> `<–¢–æ–≤–∞—Ä>`
- **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è —É–∑–ª–∞ `<–¢–æ–≤–∞—Ä>`**:
  - `<–ê—Ä—Ç–∏–∫—É–ª>`: –ê—Ä—Ç–∏–∫—É–ª —Ç–æ–≤–∞—Ä–∞.
  - `<–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ>`: –ë–∞–∑–æ–≤–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞.
  - `<–ë–∞–∑–æ–≤–∞—è–ï–¥–∏–Ω–∏—Ü–∞>`: ID –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è –∏–∑ `units.xml`.
  - `<–ì—Ä—É–ø–ø—ã>`: –°–æ–¥–µ—Ä–∂–∏—Ç `<–ò–¥>` –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ `groups.xml`.
  - `<–û–ø–∏—Å–∞–Ω–∏–µ>`: HTML-–æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞.
  - `<–ö–∞—Ä—Ç–∏–Ω–∫–∞>`: –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ.
  - `<–ó–Ω–∞—á–µ–Ω–∏—è–°–≤–æ–π—Å—Ç–≤>`: –ë–ª–æ–∫ —Å–æ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤ –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ –≤ `propertiesGoods/`.
  - `<–ó–Ω–∞—á–µ–Ω–∏—è–†–µ–∫–≤–∏–∑–∏—Ç–æ–≤>`: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ, –Ω–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ "–í–∏–¥–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã", "–¢–∏–ø–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã", "–ü–æ–ª–Ω–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ".

#### –ê.2.2 `groups/groups.xml` - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏

- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–ø–∏—Å–∞–Ω–∏–µ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –∫–∞—Ç–∞–ª–æ–≥–∞.
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**: `<–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä>` -> `<–ì—Ä—É–ø–ø—ã>` -> `<–ì—Ä—É–ø–ø–∞>`
- **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è —É–∑–ª–∞ `<–ì—Ä—É–ø–ø–∞>`**:
  - `<–ò–¥>`: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π UUID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
  - `<–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ>`: –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
  - `<–ì—Ä—É–ø–ø—ã>`: –í–ª–æ–∂–µ–Ω–Ω—ã–π —É–∑–µ–ª –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π, —á—Ç–æ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –¥–µ—Ä–µ–≤–æ.

#### –ê.2.3 `offers/offers.xml` - –¢–æ—Ä–≥–æ–≤—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (SKU)

- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –≤–∞—Ä–∏–∞—Ü–∏–π —Ç–æ–≤–∞—Ä–æ–≤.
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**: `<–ü–∞–∫–µ—Ç–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π>` -> `<–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è>` -> `<–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ>`
- **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è —É–∑–ª–∞ `<–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ>`**:
  - `<–ò–¥>`: –°–æ—Å—Ç–∞–≤–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–∏–¥–∞ `[–ò–¥–¢–æ–≤–∞—Ä–∞]#[–ò–¥–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏]`. –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–≤—è–∑–∞—Ç—å SKU —Å –±–∞–∑–æ–≤—ã–º —Ç–æ–≤–∞—Ä–æ–º –∏–∑ `goods.xml`.
  - `<–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ>`: –ü–æ–ª–Ω–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ SKU (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ü–≤–µ—Ç–∞ –∏ —Ä–∞–∑–º–µ—Ä–∞).
  - `<–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏–¢–æ–≤–∞—Ä–∞>`: –°–ø–∏—Å–æ–∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏—Ö –¥–∞–Ω–Ω—ã–π SKU (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–î–ª–∏–Ω–∞ –∫–æ—Ä–æ–±–∫–∏", "–í–µ—Å").
  - `<–ó–Ω–∞—á–µ–Ω–∏—è–°–≤–æ–π—Å—Ç–≤>`: –°—Å—ã–ª–∫–∏ –Ω–∞ ID —Å–≤–æ–π—Å—Ç–≤ –∏–∑ `propertiesOffers/`.

#### –ê.2.4 `prices/prices.xml` - –¶–µ–Ω—ã

- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–∫–∞–∑–∞–Ω–∏–µ —Ü–µ–Ω –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ –∏ –∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π.
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**: `<–ü–∞–∫–µ—Ç–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π>` -> `<–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è>` -> `<–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ>`
- **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è —É–∑–ª–∞ `<–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ>`**:
  - `<–ò–¥>`: ID —Ç–æ–≤–∞—Ä–∞ –∏–ª–∏ SKU, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –æ—Ç–Ω–æ—Å–∏—Ç—Å—è —Ü–µ–Ω–∞.
  - `<–¶–µ–Ω—ã>` -> `<–¶–µ–Ω–∞>`:
    - `<–ò–¥–¢–∏–ø–∞–¶–µ–Ω—ã>`: UUID —Ç–∏–ø–∞ —Ü–µ–Ω—ã –∏–∑ `priceLists.xml`.
    - `<–¶–µ–Ω–∞–ó–∞–ï–¥–∏–Ω–∏—Ü—É>`: –ß–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ü–µ–Ω—ã.
    - `<–í–∞–ª—é—Ç–∞>`: –í–∞–ª—é—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `—Ä—É–±`).

#### –ê.2.5 `rests/rests.xml` - –û—Å—Ç–∞—Ç–∫–∏

- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–∫–∞–∑–∞–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö.
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**: `<–ü–∞–∫–µ—Ç–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π>` -> `<–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è>` -> `<–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ>`
- **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è —É–∑–ª–∞ `<–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ>`**:
  - `<–ò–¥>`: ID —Ç–æ–≤–∞—Ä–∞ –∏–ª–∏ SKU.
  - `<–û—Å—Ç–∞—Ç–∫–∏>` -> `<–û—Å—Ç–∞—Ç–æ–∫>`:
    - `<–°–∫–ª–∞–¥>`:
      - `<–ò–¥>`: UUID —Å–∫–ª–∞–¥–∞ –∏–∑ `storages.xml`.
      - `<–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ>`: –ß–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∞.

#### –ê.2.6 –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏

- **`priceLists/priceLists.xml`**: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–∏–ø–æ–≤ —Ü–µ–Ω. –°–æ–¥–µ—Ä–∂–∏—Ç ID –∏ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–†–†–¶", "–û–ø—Ç 1").
- **`storages/storages.xml`**: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å–∫–ª–∞–¥–æ–≤. –°–æ–¥–µ—Ä–∂–∏—Ç ID –∏ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è —Å–∫–ª–∞–¥–æ–≤.
- **`units/units.xml`**: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è (—à—Ç, –∫–≥, –º –∏ —Ç.–¥.).
- **`propertiesGoods/` –∏ `propertiesOffers/`**: –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å XML-—Ñ–∞–π–ª–∞–º–∏, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞ –∏ –∏—Ö –≤–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (`<–í–∞—Ä–∏–∞–Ω—Ç—ã–ó–Ω–∞—á–µ–Ω–∏–π>`). –ù–∞–ø—Ä–∏–º–µ—Ä, —Å–≤–æ–π—Å—Ç–≤–æ "–¶–≤–µ—Ç" –∏ –µ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç—ã "–ö—Ä–∞—Å–Ω—ã–π", "–°–∏–Ω–∏–π".
- **`contragents/contragents.xml`**: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ (–ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π) —Å –∏—Ö —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º–∏. –ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –Ω–æ –≤–∞–∂–µ–Ω –¥–ª—è –±—É–¥—É—â–µ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∑–∞–∫–∞–∑–æ–≤.

### –ê.3 –°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –¥–∞–Ω–Ω—ã—Ö

1. **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ (`groups.xml`)** –æ–±—Ä–∞–∑—É—é—Ç –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É.
2. **–¢–æ–≤–∞—Ä—ã (`goods.xml`)** –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º —á–µ—Ä–µ–∑ `<–ì—Ä—É–ø–ø—ã>`.
3. **–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è/SKU (`offers.xml`)** –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ —Ç–æ–≤–∞—Ä–∞–º —á–µ—Ä–µ–∑ —Å–æ—Å—Ç–∞–≤–Ω–æ–π `<–ò–¥>`.
4. **–¶–µ–Ω—ã (`prices.xml`)** –∏ **–û—Å—Ç–∞—Ç–∫–∏ (`rests.xml`)** –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ —Ç–æ–≤–∞—Ä–∞–º –∏–ª–∏ SKU –ø–æ –∏—Ö `<–ò–¥>`.
5. –í—Å–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã (—Ç–∏–ø—ã —Ü–µ–Ω, —Å–∫–ª–∞–¥—ã, –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è, —Å–≤–æ–π—Å—Ç–≤–∞) —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤-—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤.

–≠—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç—Ä–µ–±—É–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞, –Ω–∞—á–∏–Ω–∞—è —Å–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π, –∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Ç–æ–≤–∞—Ä–æ–≤ —Ü–µ–Ω–∞–º–∏ –∏ –æ—Å—Ç–∞—Ç–∫–∞–º–∏.

### –ê.4 –ê–Ω–∞–ª–∏–∑ —Ñ–∞–π–ª–æ–≤-—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤

#### –ê.4.1 `priceLists/priceLists.xml` - –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–∏–ø–æ–≤ —Ü–µ–Ω

- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É UUID —Ç–∏–ø–∞ —Ü–µ–Ω—ã –∏ –µ–≥–æ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º. –ö—Ä–∞–π–Ω–µ –≤–∞–∂–µ–Ω –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞ —Ü–µ–Ω –Ω–∞ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ FREESPORT.
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** `<–¢–∏–ø—ã–¶–µ–Ω>` -> `<–¢–∏–ø–¶–µ–Ω—ã>`
- **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è —É–∑–ª–∞ `<–¢–∏–ø–¶–µ–Ω—ã>`:**
  - `<–ò–¥>`: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π UUID —Ç–∏–ø–∞ —Ü–µ–Ω—ã. **–ü—Ä–∏–º–µ—Ä:** `90d2c899-b3f2-11ea-81c3-00155d3cae02`.
  - `<–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ>`: –ß–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ —Ü–µ–Ω—ã. **–ü—Ä–∏–º–µ—Ä:** `–û–ø—Ç 1 (300-600 —Ç—ã—Å.—Ä—É–± –≤ –∫–≤–∞—Ä—Ç–∞–ª)`.
  - `<–í–∞–ª—é—Ç–∞>`: –í–∞–ª—é—Ç–∞ —Ü–µ–Ω—ã, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, `RUB`.
  - `<–ù–∞–ª–æ–≥>`: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞–ª–æ–≥–∞—Ö, –æ–±—ã—á–Ω–æ –ù–î–°.

#### –ê.4.2 `propertiesGoods/` –∏ `propertiesOffers/` - –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ —Å–≤–æ–π—Å—Ç–≤

- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–ø–∏—Å—ã–≤–∞—é—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ë—Ä–µ–Ω–¥", "–¶–≤–µ—Ç", "–ú–∞—Ç–µ—Ä–∏–∞–ª") –∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è.
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** –ö–∞–∂–¥—ã–π —Ñ–∞–π–ª –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –æ–¥–Ω–æ —Å–≤–æ–π—Å—Ç–≤–æ. `<–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä>` -> `<–°–≤–æ–π—Å—Ç–≤–∞>` -> `<–°–≤–æ–π—Å—Ç–≤–æ>`
- **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è —É–∑–ª–∞ `<–°–≤–æ–π—Å—Ç–≤–æ>`:**
  - `<–ò–¥>`: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π UUID —Å–≤–æ–π—Å—Ç–≤–∞.
  - `<–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ>`: –ù–∞–∑–≤–∞–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞. **–ü—Ä–∏–º–µ—Ä:** `–ë—Ä–µ–Ω–¥`.
  - `<–í–∞—Ä–∏–∞–Ω—Ç—ã–ó–Ω–∞—á–µ–Ω–∏–π>`: –ü–µ—Ä–µ—á–µ–Ω—å –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —ç—Ç–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞.
  - `<–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫>`:
    - `<–ò–¥–ó–Ω–∞—á–µ–Ω–∏—è>`: UUID –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è.
    - `<–ó–Ω–∞—á–µ–Ω–∏–µ>`: –¢–µ–∫—Å—Ç–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è. **–ü—Ä–∏–º–µ—Ä:** `Nike`.

#### –ê.4.3 `units/units.xml` - –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è

- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –µ–¥–∏–Ω–∏—Ü—ã, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –∏–∑–º–µ—Ä—è–µ—Ç—Å—è —Ç–æ–≤–∞—Ä (—à—Ç—É–∫–∏, –∫–∏–ª–æ–≥—Ä–∞–º–º—ã, —É–ø–∞–∫–æ–≤–∫–∏ –∏ —Ç.–¥.).
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** `<–ï–¥–∏–Ω–∏—Ü—ã–ò–∑–º–µ—Ä–µ–Ω–∏—è>` -> `<–ï–¥–∏–Ω–∏—Ü–∞–ò–∑–º–µ—Ä–µ–Ω–∏—è>`
- **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è —É–∑–ª–∞ `<–ï–¥–∏–Ω–∏—Ü–∞–ò–∑–º–µ—Ä–µ–Ω–∏—è>`:**
  - `<–ò–¥>`: –ö–æ–¥–æ–≤—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –µ–¥–∏–Ω–∏—Ü—ã. **–ü—Ä–∏–º–µ—Ä:** `796`.
  - `<–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ–ö—Ä–∞—Ç–∫–æ–µ>`: –ö—Ä–∞—Ç–∫–æ–µ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ. **–ü—Ä–∏–º–µ—Ä:** `—à—Ç`.
  - `<–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ–ü–æ–ª–Ω–æ–µ>`: –ü–æ–ª–Ω–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ. **–ü—Ä–∏–º–µ—Ä:** `—à—Ç—É–∫`.

#### –ê.4.4 `storages/storages.xml` - –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å–∫–ª–∞–¥–æ–≤

- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–µ—Ä–µ—á–µ–Ω—å —Å–∫–ª–∞–¥–æ–≤, —Å –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–≥—É—Ç –æ—Ç–≥—Ä—É–∂–∞—Ç—å—Å—è —Ç–æ–≤–∞—Ä—ã.
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** `<–°–∫–ª–∞–¥—ã>` -> `<–°–∫–ª–∞–¥>`
- **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è —É–∑–ª–∞ `<–°–∫–ª–∞–¥>`:**
  - `<–ò–¥>`: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π UUID —Å–∫–ª–∞–¥–∞.
  - `<–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ>`: –ù–∞–∑–≤–∞–Ω–∏–µ —Å–∫–ª–∞–¥–∞. **–ü—Ä–∏–º–µ—Ä:** `1 –°–î–í —Å–∫–ª–∞–¥`.
