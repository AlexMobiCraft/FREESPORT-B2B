# –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ (Source Tree Analysis)

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ FREESPORT, –≤—ã–¥–µ–ª—è—è –∫–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ –∏ –ª–æ–≥–∏–∫—É –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É —á–∞—Å—Ç—è–º–∏.

## üìÇ –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Monorepo)

```text
freesport/
‚îú‚îÄ‚îÄ backend/                # Django REST Framework API (–ë—ç–∫–µ–Ω–¥)
‚îú‚îÄ‚îÄ frontend/               # Next.js 15.5 application (–§—Ä–æ–Ω—Ç–µ–Ω–¥)
‚îú‚îÄ‚îÄ docker/                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ docs/                   # –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (BMAD V6)
‚îú‚îÄ‚îÄ scripts/                # –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ data/                   # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏ —Ñ–∞–π–ª—ã –∏–º–ø–æ—Ä—Ç–∞
‚îî‚îÄ‚îÄ docker-compose.yml      # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
```

---

## üêç Backend Architecture (`backend/`)

–ë—ç–∫–µ–Ω–¥ –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ **Django 5.2.7** –∏ **Django REST Framework 3.14**. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

### üèõÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`backend/apps/`)

| –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã |
| :--- | :--- | :--- |
| **users** | –†–æ–ª–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ (7 —Ä–æ–ª–µ–π), B2B –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è, –ø—Ä–æ—Ñ–∏–ª–∏. | `models.py` (User, Company, Address) |
| **products** | –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤, –±—Ä–µ–Ω–¥—ã, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ä–æ–ª–µ–≤—ã–µ —Ü–µ–Ω—ã. | `models.py` (Product, ProductVariant, Attribute) |
| **cart** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω–æ–π (–≥–æ—Å—Ç–∏ + –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ). | `models.py` (Cart, CartItem) |
| **orders** | –°–∏—Å—Ç–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞, –∏—Å—Ç–æ—Ä–∏—è. | `models.py` (Order, OrderItem), `serializers.py` |
| **integrations** | –û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ —Å 1–° (CommerceML), Celery –∑–∞–¥–∞—á–∏. | `tasks.py` (import logic), `models.py` (Session) |
| **banners** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Hero-—Å–µ–∫—Ü–∏–µ–π —Å —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥–æ–º. | `models.py` (Banner) |
| **common** | –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã, –Ω–æ–≤–æ—Å—Ç–∏, –±–ª–æ–≥, –ø–æ–¥–ø–∏—Å–∫–∏. | `utils/`, `models.py` (News, BlogPost) |

### ‚öôÔ∏è –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë—ç–∫–µ–Ω–¥–∞
- **`backend/freesport/`**: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ Django.
- **`backend/tests/`**: –¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (Pytest).
- **`backend/manage.py`**: –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ CLI.

---

## ‚öõÔ∏è Frontend Architecture (`frontend/`)

–§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ **Next.js 15.5** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **App Router** –∏ **TypeScript**.

### üß© –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ (`frontend/src/`)

- **`app/`**: –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (Next.js App Router).
  - `(blue)/`: –û—Å–Ω–æ–≤–Ω–∞—è —Ç–µ–º–∞ (–°–∏–Ω—è—è).
  - `(electric)/`: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —Ç–µ–º–∞ (Electric Orange).
- **`components/`**: –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.
  - `ui/`: –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –∏ —Å–æ—Å—Ç–∞–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Card, Button, ProductCard).
  - `layout/`: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–∑–º–µ—Ç–∫–∏ (Header, Footer).
- **`services/`**: –°–ª–æ–π –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API (Axios).
  - `api-client.ts`: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π SSR –∏ Refresh Token.
- **`stores/`**: –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (Zustand).
  - `authStore.ts`, `cartStore.ts` (—Å Optimistic Updates).
- **`hooks/`**: –ö–∞—Å—Ç–æ–º–Ω—ã–µ React —Ö—É–∫–∏.
- **`types/`**: TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (–≤–∫–ª—é—á–∞—è –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ –∏–∑ OpenAPI).

---

## üîÑ –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

1.  **Frontend <-> Backend**: REST API –∑–∞–ø—Ä–æ—Å—ã. –í —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Docker) —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –±—ç–∫–µ–Ω–¥—É –ø–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º—É –∞–¥—Ä–µ—Å—É `http://backend:8000`, –≤ –±—Ä–∞—É–∑–µ—Ä–µ ‚Äî —á–µ—Ä–µ–∑ Nginx –ø—Ä–æ–∫—Å–∏.
2.  **Backend <-> 1C**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∏–º–ø–æ—Ä—Ç XML-—Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ Celery. –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ ‚Äî `backend/apps/integrations/tasks.py`.
3.  **–•—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**: –ì–∏–±—Ä–∏–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ 1–° –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ `backend/media/products/` –∏ –æ–±—Å–ª—É–∂–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ Nginx.

---

## üöÄ –¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **Backend API**: `backend/manage.py runserver` (–ø–æ—Ä—Ç 8001 –ª–æ–∫–∞–ª—å–Ω–æ).
- **Frontend Dev**: `npm run dev` (–ø–æ—Ä—Ç 3000 –ª–æ–∫–∞–ª—å–Ω–æ).
- **Docker Dev**: `docker compose -f docker/docker-compose.yml up`.
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `.env` —Ñ–∞–π–ª—ã –≤ –∫–æ—Ä–Ω–µ –∏ –ø–æ–¥–ø–∞–ø–∫–∞—Ö.