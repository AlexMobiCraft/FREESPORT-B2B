# –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã API (API Contracts)

–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º. –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏–º–µ—é—Ç –ø—Ä–µ—Ñ–∏–∫—Å `/api/v1/`.

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`/auth/`)

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| POST | `/auth/register/` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (B2C ‚Äî —Å—Ä–∞–∑—É, B2B ‚Äî —Ç—Ä–µ–±—É–µ—Ç –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏). |
| POST | `/auth/login/` | –ü–æ–ª—É—á–µ–Ω–∏–µ Access/Refresh —Ç–æ–∫–µ–Ω–æ–≤. |
| POST | `/auth/refresh/` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Access —Ç–æ–∫–µ–Ω–∞ (—Å —Ä–æ—Ç–∞—Ü–∏–µ–π Refresh). |
| POST | `/auth/logout/` | –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ (Blacklist). |

---

## üõçÔ∏è –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ (`/products/`)

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| GET | `/products/` | –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π (–∫–∞—Ç–µ–≥–æ—Ä–∏—è, –±—Ä–µ–Ω–¥, —Ü–µ–Ω–∞, —Ñ–ª–∞–≥–∏). |
| GET | `/products/{slug}/` | –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ, –≤–∫–ª—é—á–∞—è –≤–∞—Ä–∏–∞–Ω—Ç—ã (SKU). |
| GET | `/products/search/` | –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ (PostgreSQL FTS). |
| GET | `/categories/` | –î–µ—Ä–µ–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π. |

---

## üõí –ö–æ—Ä–∑–∏–Ω–∞ –∏ –ó–∞–∫–∞–∑—ã (`/cart/`, `/orders/`)

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| GET | `/cart/` | –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–µ–∫—É—â–µ–π –∫–æ—Ä–∑–∏–Ω—ã (–ø–æ JWT –∏–ª–∏ —Å–µ—Å—Å–∏–∏). |
| POST | `/cart/add/` | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ `variant_id` –≤ –∫–æ—Ä–∑–∏–Ω—É. |
| POST | `/orders/` | –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã (—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ). |
| GET | `/orders/{id}/` | –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞ –∏ —Å—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã. |

---

## ‚öôÔ∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (Frontend)

- **api-client.ts**: –ë–∞–∑–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç –Ω–∞ Axios.
- **SSR Handling**: –§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏–µ (Server/Client) –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π `baseURL`.
- **Error Handling**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ö–∞–Ω–∏–∑–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ (`retry`) –ø—Ä–∏ 500/503 –æ—à–∏–±–∫–∞—Ö.
